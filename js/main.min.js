const date=new Date;let year=date.getFullYear(),month=date.getMonth();const calendar=document.querySelector(".calendar__body"),dateCells=document.querySelectorAll(".calendar__date"),currMonthAndYear=document.querySelector(".month-control__month-name"),buttonPrev=document.querySelector(".month-control__button--prev"),buttonNext=document.querySelector(".month-control__button--next"),addEvent=document.querySelector(".event-modal--new"),addEventForm=addEvent.querySelector(".form"),getLastDayOfMonth=(e,t)=>new Date(e,t+1,0).getDate(),getFirstWeekDayOfMonth=(e,t)=>new Date(e,t).getDay(),getLastWeekDayOfMonth=(e,t)=>new Date(e,t+1,0).getDay(),getShiftElemNum=(e,t)=>{let n=getFirstWeekDayOfMonth(e,t);return 0===n?6:n-1},getPushElemNum=(e,t)=>{let n=getLastWeekDayOfMonth(e,t);return 0===n?0:7-n},getDaysOfPrevMonth=(e,t)=>{let n=new Date(e,t,0).getDate(),a=[];for(;a.length!==getShiftElemNum(e,t);)a.push(n),n-=1;return a.reverse(),a},getDaysOfNextMonth=(e,t)=>{let n=new Date(e,t,1).getDate(),a=[];for(;a.length!==getPushElemNum(e,t);)a.push(n),n+=1;return a},getDates=(e,t)=>{let n=[],a=[],r=getDaysOfPrevMonth(e,t),o=getDaysOfNextMonth(e,t);for(let n=1;n<=getLastDayOfMonth(e,t);n++)a.push(n);return n=r.concat(a,o),n},getMonthName=e=>["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][e],monthDeclension=e=>{let t;return t=2===e||7==e?getMonthName(e).concat("а"):getMonthName(e).substring(0,getMonthName(e).length-1).concat("я"),t},showCurrMonthAndYear=(e,t,n)=>{n.textContent=`${getMonthName(t)} ${e}`},getPrevYear=(e,t)=>0===t?e-1:e,getPrevMonth=e=>0===e?11:e-1,getNextYear=(e,t)=>11===t?e+1:e,getNextMonth=e=>11===e?0:e+1,showPrevMonthAndYear=()=>{year=getPrevYear(year,month),month=getPrevMonth(month),element=calendar,addEvent.classList.contains("event-modal--show")&&addEvent.classList.remove("event-modal--show"),renderCalendar(year,month,element)},showNextMonthAndYear=()=>{element=calendar,year=getNextYear(year,month),month=getNextMonth(month),renderCalendar(year,month,element),addEvent.classList.contains("event-modal--show")&&addEvent.classList.remove("event-modal--show")},createElement=(e,t,n,a)=>{let r=document.createElement(e);t&&r.classList.add(t),a&&(r.textContent+=a),n.appendChild(r)},showPopup=(e,t)=>{e.forEach((n=>{n.addEventListener("click",(()=>{for(let n=0;n<e.length;n++)e[n].classList.contains(t)&&e[n].classList.remove(t);n.classList.add(t),addEvent.classList.add("event-modal--show"),addEvent.style.left=n.getBoundingClientRect().right+"px",addEvent.style.top=n.getBoundingClientRect().top+"px",addEvent.querySelector(".event-modal__close-button").addEventListener("click",(()=>{clearForm(),n.classList.remove(t),addEvent.classList.remove("event-modal--show"),addEvent.style.left="",addEvent.style.top=""})),fillDate(n),addEventForm.addEventListener("submit",(e=>{e.preventDefault()}))}))}))},clearForm=()=>{let e=addEvent.querySelector(".form__input--date"),t=addEvent.querySelector(".form__input--event"),n=addEvent.querySelector(".form__input--participants");t.value="",n.value="",e.value=""},fillDate=e=>{let t=addEvent.querySelector(".form__input--date"),n=e.querySelector(".calendar__date");t.value=`${n.textContent} ${monthDeclension(month)} ${year}`},renderDates=(e,t,n)=>{n.innerHTML="";let a=["Понедельник, ","Вторник, ","Среда, ","Четверг, ","Пятница, ","Суббота, ","Воскресенье, "],r=getDates(e,t);createElement("table","calendar__month",calendar);let o=document.querySelector(".calendar__month");createElement("tbody",!1,o);let l=document.querySelector("tbody");for(let e=0;e<Math.floor(r.length/7);e++)createElement("tr","calendar__week",l);let d=document.querySelectorAll(".calendar__week");for(let e=0;e<d.length;e++)for(let t=0;t<7;t++)createElement("td","calendar__day",d[e]);let s=document.querySelectorAll(".calendar__day");for(let e=0;e<a.length;e++)createElement("span","calendar__weekday",s[e],a[e]);for(let e=0;e<r.length;e++)createElement("span","calendar__date",s[e],r[e]);var c,m;m="calendar__day--active",(c=s).forEach((e=>{e.addEventListener("click",(()=>{for(let e=0;e<c.length;e++)c[e].classList.contains(m)&&c[e].classList.remove(m);e.classList.add(m),addEvent.classList.add("event-modal--show"),addEvent.style.left=e.getBoundingClientRect().right+"px",addEvent.style.top=e.getBoundingClientRect().top+"px",addEvent.querySelector(".event-modal__close-button").addEventListener("click",(()=>{clearForm(),e.classList.remove(m),addEvent.classList.remove("event-modal--show"),addEvent.style.left="",addEvent.style.top=""})),fillDate(e),addEventForm.addEventListener("submit",(e=>{e.preventDefault()}))}))}))},renderCalendar=(e,t,n)=>{renderDates(e,t,n),showCurrMonthAndYear(e,t,currMonthAndYear),buttonPrev.addEventListener("click",showPrevMonthAndYear),buttonNext.addEventListener("click",showNextMonthAndYear)};renderCalendar(year,month,calendar);
//# sourceMappingURL=main.min.js.map
